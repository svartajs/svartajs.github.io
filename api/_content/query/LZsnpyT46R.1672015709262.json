{"_path":"/deployment/fly","_dir":"deployment","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Fly.io","description":"Let's setup a simple web server on fly.io using Docker.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"flyio"},"children":[{"type":"text","value":"Fly.io"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let's setup a simple web server on "},{"type":"element","tag":"a","props":{"href":"https://fly.io/","rel":["nofollow"]},"children":[{"type":"text","value":"fly.io"}]},{"type":"text","value":" using Docker."}]},{"type":"element","tag":"h2","props":{"id":"setup-flyio"},"children":[{"type":"text","value":"Setup fly.io"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"First, make sure the flyctl CLI tool is installed:"}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Check out the "},{"type":"element","tag":"a","props":{"href":"https://fly.io/docs/hands-on/install-flyctl/","rel":["nofollow"]},"children":[{"type":"text","value":"fly.io Docs"}]},{"type":"text","value":" for more information"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create a fly.io account, in your dashboard, press "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Launch an app"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"setup-web-server"},"children":[{"type":"text","value":"Setup web server"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now setup a new HTTP web server using:"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"pnpm create svarta-app\n","filename":"pnpm","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"pnpm create svarta-app\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"yarn create svarta-app\n","filename":"yarn","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"yarn create svarta-app\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"npm create svarta-app\n","filename":"npm","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"npm create svarta-app\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"And follow in-terminal instructions. Select the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"starter-http"}]},{"type":"text","value":" template."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The template comes with a Dockerfile, so we're almost ready to go. Just one thing:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"svarta.config.mjs"}]},{"type":"text","value":" change the defaultPort to 8080 (the default for fly.io). Otherwise you could change the port by using the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"PORT"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SVARTA_PORT"}]},{"type":"text","value":" environment variables."}]},{"type":"element","tag":"h2","props":{"id":"create-flyio-app"},"children":[{"type":"text","value":"Create fly.io app"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"flyctl launch\n","filename":"terminal","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"flyctl launch\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"flyctl will detect the Dockerfile. Go through the setup and then deploy using:"}]},{"type":"element","tag":"h2","props":{"id":"deploy-to-flyio"},"children":[{"type":"text","value":"Deploy to fly.io"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"flyctl deploy\n","filename":"terminal","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"flyctl deploy\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Wait for the docker image to deploy, then your API will deployed on [app-name].fly.dev."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Check out the example app "},{"type":"element","tag":"a","props":{"href":"https://hellosvarta.fly.dev/","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"And here's the "},{"type":"element","tag":"a","props":{"href":"https://github.com/svartajs/example-flyio-starter","rel":["nofollow"]},"children":[{"type":"text","value":"example repository"}]},{"type":"text","value":"."}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"flyio"},"children":[{"type":"text","value":"Fly.io"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let's setup a simple web server on "},{"type":"element","tag":"a","props":{"href":"https://fly.io/","rel":["nofollow"]},"children":[{"type":"text","value":"fly.io"}]},{"type":"text","value":" using Docker."}]},{"type":"element","tag":"h2","props":{"id":"setup-flyio"},"children":[{"type":"text","value":"Setup fly.io"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"First, make sure the flyctl CLI tool is installed:"}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Check out the "},{"type":"element","tag":"a","props":{"href":"https://fly.io/docs/hands-on/install-flyctl/","rel":["nofollow"]},"children":[{"type":"text","value":"fly.io Docs"}]},{"type":"text","value":" for more information"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create a fly.io account, in your dashboard, press "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Launch an app"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"setup-web-server"},"children":[{"type":"text","value":"Setup web server"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now setup a new HTTP web server using:"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"pnpm create svarta-app\n","filename":"pnpm","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9c43ba"},"children":[{"type":"text","value":"pnpm create svarta-app"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"yarn create svarta-app\n","filename":"yarn","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9c43ba"},"children":[{"type":"text","value":"yarn create svarta-app"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"npm create svarta-app\n","filename":"npm","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9c43ba"},"children":[{"type":"text","value":"npm create svarta-app"}]}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"And follow in-terminal instructions. Select the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"starter-http"}]},{"type":"text","value":" template."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The template comes with a Dockerfile, so we're almost ready to go. Just one thing:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"svarta.config.mjs"}]},{"type":"text","value":" change the defaultPort to 8080 (the default for fly.io). Otherwise you could change the port by using the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"PORT"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SVARTA_PORT"}]},{"type":"text","value":" environment variables."}]},{"type":"element","tag":"h2","props":{"id":"create-flyio-app"},"children":[{"type":"text","value":"Create fly.io app"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"flyctl launch\n","filename":"terminal","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9c43ba"},"children":[{"type":"text","value":"flyctl launch"}]}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"flyctl will detect the Dockerfile. Go through the setup and then deploy using:"}]},{"type":"element","tag":"h2","props":{"id":"deploy-to-flyio"},"children":[{"type":"text","value":"Deploy to fly.io"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"flyctl deploy\n","filename":"terminal","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9c43ba"},"children":[{"type":"text","value":"flyctl deploy"}]}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Wait for the docker image to deploy, then your API will deployed on [app-name].fly.dev."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Check out the example app "},{"type":"element","tag":"a","props":{"href":"https://hellosvarta.fly.dev/","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"And here's the "},{"type":"element","tag":"a","props":{"href":"https://github.com/svartajs/example-flyio-starter","rel":["nofollow"]},"children":[{"type":"text","value":"example repository"}]},{"type":"text","value":"."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-9c43ba{color:#24292F}\n.dark .ct-9c43ba{color:#C9D1D9}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"setup-flyio","depth":2,"text":"Setup fly.io"},{"id":"setup-web-server","depth":2,"text":"Setup web server"},{"id":"create-flyio-app","depth":2,"text":"Create fly.io app"},{"id":"deploy-to-flyio","depth":2,"text":"Deploy to fly.io"}]}},"_type":"markdown","_id":"content:4.deployment:0.fly.md","_source":"content","_file":"4.deployment/0.fly.md","_extension":"md"}