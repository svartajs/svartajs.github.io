[{"_path":"/adapters/standalone","_dir":"adapters","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Standalone","description":"","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"standalone"},"children":[{"type":"text","value":"Standalone"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Package: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@svarta/adapter-standalone"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is the default deployment target. It is powered by "},{"type":"element","tag":"a","props":{"href":"https://tinyhttp.v1rtl.site/","rel":["nofollow"]},"children":[{"type":"text","value":"tinyhttp"}]},{"type":"text","value":", weighing in at only about 250 kB. Your routes will be bundled and minified into a single file using "},{"type":"element","tag":"a","props":{"href":"https://esbuild.github.io/","rel":["nofollow"]},"children":[{"type":"text","value":"esbuild"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"import standaloneAdapter from \"@svarta/adapter-standalone\";\n\n/**\n * @type {import(\"@svarta/cli\").Config}\n */\nconst config = {\n  packageManager: \"npm\",\n  routeFolder: \"routes\",\n  minify: true,\n  adapter: standaloneAdapter({\n    defaultPort: 7777,\n    provider: \"tinyhttp\",\n    outputFile: \".output/server.mjs\",\n    logger: {\n      enabled: true,\n    },\n    // TODO: public serving\n    // TODO: deploy\n  }),\n};\n\nexport default config;\n","filename":"svarta.config.mjs","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import standaloneAdapter from \"@svarta/adapter-standalone\";\n\n/**\n * @type {import(\"@svarta/cli\").Config}\n */\nconst config = {\n  packageManager: \"npm\",\n  routeFolder: \"routes\",\n  minify: true,\n  adapter: standaloneAdapter({\n    defaultPort: 7777,\n    provider: \"tinyhttp\",\n    outputFile: \".output/server.mjs\",\n    logger: {\n      enabled: true,\n    },\n    // TODO: public serving\n    // TODO: deploy\n  }),\n};\n\nexport default config;\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Using the example above, just run "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"node .output/server.mjs"}]},{"type":"text","value":" to run the server."}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Check out the full standalone starter template "},{"type":"element","tag":"a","props":{"href":"https://github.com/svartajs/svarta/tree/main/templates/starter-http","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]}]}]},{"type":"element","tag":"h2","props":{"id":"configuration-reference"},"children":[{"type":"text","value":"Configuration reference"}]},{"type":"element","tag":"h3","props":{"id":"defaultport"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"defaultPort"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The default port to bind to. The HTTP port can be dynamically adjusted using the environment variables "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SVARTA_PORT"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"PORT"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"provider"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"provider"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Default: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"tinyhttp\""}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The server backend library. Currently, only "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tinyhttp"}]},{"type":"text","value":" is supported."}]},{"type":"element","tag":"h3","props":{"id":"outputfile"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"outputFile"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The output file to which your server will be bundled & output to."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the file ends with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".js"}]},{"type":"text","value":", it will be converted as CommonJS server, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".mjs"}]},{"type":"text","value":" emits an ESM server instead, which is recommended."}]},{"type":"element","tag":"h3","props":{"id":"logger"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"logger"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Default: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"{ enabled: true }"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"logger.enabled"}]},{"type":"text","value":" is true, a simple HTTP logger is installed before your routes."}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"manual-install"},"children":[{"type":"text","value":"Manual install"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"pnpm i -D @svarta/adapter-standalone @tinyhttp/app milliparsec\n","filename":"pnpm","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"pnpm i -D @svarta/adapter-standalone @tinyhttp/app milliparsec\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"yarn add -D @svarta/adapter-standalone @tinyhttp/app milliparsec\n","filename":"yarn","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"yarn add -D @svarta/adapter-standalone @tinyhttp/app milliparsec\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"npx i -D @svarta/adapter-standalone @tinyhttp/app milliparsec\n","filename":"npm","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"npx i -D @svarta/adapter-standalone @tinyhttp/app milliparsec\n"}]}]}]}]}]},"_type":"markdown","_id":"content:3.adapters:1.standalone.md","_source":"content","_file":"3.adapters/1.standalone.md","_extension":"md"},{"_path":"/deployment/fly","_dir":"deployment","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Fly","description":"Let's setup a simple web server on fly.io using Docker.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"fly"},"children":[{"type":"text","value":"Fly"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let's setup a simple web server on "},{"type":"element","tag":"a","props":{"href":"https://fly.io/","rel":["nofollow"]},"children":[{"type":"text","value":"fly.io"}]},{"type":"text","value":" using Docker."}]},{"type":"element","tag":"h2","props":{"id":"setup-flyio"},"children":[{"type":"text","value":"Setup fly.io"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"First, make sure the flyctl CLI tool is installed:"}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Check out the "},{"type":"element","tag":"a","props":{"href":"https://fly.io/docs/hands-on/install-flyctl/","rel":["nofollow"]},"children":[{"type":"text","value":"fly.io Docs"}]},{"type":"text","value":" for more information"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create a fly.io account, in your dashboard, press "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Launch an app"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"setup-web-server"},"children":[{"type":"text","value":"Setup web server"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now setup a new HTTP web server using:"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"pnpm create svarta-app\n","filename":"pnpm","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"pnpm create svarta-app\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"yarn create svarta-app\n","filename":"yarn","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"yarn create svarta-app\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"npm create svarta-app\n","filename":"npm","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"npm create svarta-app\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"And follow in-terminal instructions. Select the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"starter-http"}]},{"type":"text","value":" template."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The template comes with a Dockerfile, so we're almost ready to go. Just one thing:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"svarta.config.mjs"}]},{"type":"text","value":" change the defaultPort to 8080 (the default for fly.io). Otherwise you could change the port by using the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"PORT"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SVARTA_PORT"}]},{"type":"text","value":" environment variables."}]},{"type":"element","tag":"h2","props":{"id":"create-flyio-app"},"children":[{"type":"text","value":"Create fly.io app"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"flyctl launch\n","filename":"terminal","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"flyctl launch\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"flyctl will detect the Dockerfile. Go through the setup and then deploy using:"}]},{"type":"element","tag":"h2","props":{"id":"deploy-to-flyio"},"children":[{"type":"text","value":"Deploy to fly.io"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"flyctl deploy\n","filename":"terminal","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"flyctl deploy\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Wait for the docker image to deploy, then your API will deployed on [app-name].fly.dev."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Check out the example app "},{"type":"element","tag":"a","props":{"href":"https://hellosvarta.fly.dev/","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"And here's the "},{"type":"element","tag":"a","props":{"href":"https://github.com/svartajs/example-flyio-starter","rel":["nofollow"]},"children":[{"type":"text","value":"example repository"}]},{"type":"text","value":"."}]}]},"_type":"markdown","_id":"content:4.deployment:0.fly.md","_source":"content","_file":"4.deployment/0.fly.md","_extension":"md"}]